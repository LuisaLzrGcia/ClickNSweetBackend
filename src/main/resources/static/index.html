<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Click N' Sweet</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="./products/products.css" />
    <link rel="stylesheet" href="./footer/style.css" />
    <link rel="icon" href="assets/logotipo-clicknsweet-2.png" type="image/png">

    <script type="text/javascript">
        (function () {
            emailjs.init({
                publicKey: "dfBBBcohGB9JrYc8J",
            });
        })();
    </script>
    
    <style>
        .video-container-fallback {
            position: relative;
            /* Base para posicionar los elementos internos */
            width: 100%;
            padding-top: 56.25%;
            /* Proporción de aspecto 16:9 para video */
            background-color: #000;
            /* Fondo negro mientras carga */
        }

        .video-container-fallback iframe,
        .video-container-fallback .fallback-image {
            /* Hacemos que tanto el video como la imagen ocupen todo el contenedor */
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }

        /* Por defecto, la imagen de respaldo está oculta */
        .video-container-fallback .fallback-image {
            display: none;
        }

        /* --- La Magia del Cambio --- */
        /* Cuando el contenedor TENGA la clase "show-fallback"... */
        .video-container-fallback.show-fallback .fallback-image {
            display: block;
            /* ...hacemos visible la imagen... */
        }

        .video-container-fallback.show-fallback iframe {
            display: none;
            /* ...y ocultamos el video. */
        }
    </style>
</head>

<body>
    <!-- Navbar -->
    <!-- <nav class="navbar navbar-expand-xl navbar-light sticky-top shadow-sm">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="index.html">
                <img src="./assets/logotipo-clicknsweet-2.png" alt="Logo" style="height: 40px; margin-right: 8px;">
                <span style="font-family: 'Pacifico', cursive; font-size: 1.8rem;">Click N' Sweet</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                <ul class="navbar-nav align-items-xl-center invisible">
                    <li class="nav-item nav-item-user"><a class="nav-link btn btn-pink mx-1"
                            href="index.html">Inicio</a></li>
                    <li class="nav-item nav-item-user"><a class="nav-link btn btn-pink mx-1"
                            href="./products/index.html">Productos</a></li>
                    <li class="nav-item nav-item-user dropdown">
                        <a class="nav-link dropdown-toggle btn btn-pink mx-1" data-bs-toggle="dropdown"
                            aria-expanded="false">
                            Categorías
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#categories">Chocolates</a></li>
                            <li><a class="dropdown-item" href="#categories">Dulces Frutales</a></li>
                            <li><a class="dropdown-item" href="#categories">Dulces Picantes</a></li>
                            <li><a class="dropdown-item" href="#categories">Dulces de caramelo</a></li>
                            <li><a class="dropdown-item" href="#categories">Dulces Refrescantes</a></li>
                            <li><a class="dropdown-item" href="#categories">Dulces Salados</a></li>
                            <li><a class="dropdown-item" href="#categories">Dulces Cremosos</a></li>
                            <li><a class="dropdown-item" href="#categories">Dulces Especiados</a></li>
                            <li><a class="dropdown-item" href="#categories">Dulces Ácidos</a></li>
                        </ul>
                    </li>
                    <li class="nav-item nav-item-user"><a class="nav-link btn btn-pink mx-1" href="about.html">Quiénes
                            somos</a></li>
                    <li class="nav-item nav-item-user"><a class="nav-link btn btn-pink mx-1"
                            href="./contact-us/contac-us.html">Contacto</a></li>
                    <li class="nav-item nav-item-admin d-none">
                        <a class="nav-link btn btn-pink mx-1" href="new-product.html">Crear producto</a>
                    </li>
                    <li class="nav-item nav-item-admin d-none">
                        <a class="nav-link btn btn-pink mx-1" href="edit-product.html">Actualizar producto</a>
                    </li>
                    <li class="nav-item nav-item-user">
                        <a class="nav-link btn btn-pink mx-1 position-relative d-flex align-items-center justify-content-center me-3"
                            href="/cart/index.html">
                            <span class="cart-icon position-relative me-1">
                                🛒
                                <div id="cart-indicator" class="cart-badge">0</div>
                            </span>
                            Carrito
                        </a>
                    </li>

                    <li class="nav-item autenticacion">
                        <a class="nav-link btn btn-pink mx-1" href="/login/index.html">Iniciar Sesión</a>
                    </li>
                    <li class="nav-item autenticacion">
                        <a id="botonRegistro" class="nav-link btn btn-register mx-1" href="/form/form.html">Registro</a>
                    </li>
                    <li class="nav-item dropdown user-menu d-none">
                        <a id="user-icon"
                            class="nav-link dropdown-toggle d-flex align-items-center justify-content-center"
                            role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-person-circle"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li>
                                <a class="dropdown-item" href="#">Mi perfil</a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="#">Pedidos</a>
                            </li>
                            <li>
                                <hr class="dropdown-divider" />
                            </li>
                            <li>
                                <a class="dropdown-item" href="index.html" id="logout">Cerrar sesión</a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav> -->

    <nav id="navbar-container" class="navbar navbar-expand-xl navbar-light sticky-top shadow-sm"></nav>


    <!-- Banner -->
    <section class="vh-100 position-relative overflow-hidden bg-secondary text-white" style="height: auto !important">
        <div class="video-container-fallback">

            <iframe id="vimeo-player"
                src="https://player.vimeo.com/video/1107237324?badge=0&amp;autopause=0&amp;controls=0&amp;player_id=0&amp;app_id=58479&amp;autoplay=1&amp;muted=1&amp;loop=1"
                allow="autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media; web-share"
                title="Video Principal">
            </iframe>

            <img class="fallback-image" src="assets/img-backgroun-home.jpg" alt="Video no disponible en este momento">

        </div>

        <script src="https://player.vimeo.com/api/player.js"></script>
    </section>


    <section>
        <!-- Productos más vendidos -->
        <h2 class="text-center my-5">Nuestros productos más vendidos</h2>
        <div class="container-fluid d-flex flex-wrap w-100 justify-content-center" id="container-products-main">
            <!-- Los productos se cargarán aquí dinámicamente -->
        </div>
        <div class="text-center mt-4">
            <a href="/products/index.html" class="btn btn-pink-see px-4 py-2">
                Ver más
            </a>
        </div>
    </section>

    <!-- Categorías -->
    <!-- Contenedor de categorías -->
    <section id="categories" class="categories anchor-target">
        <div class="swiper mySwiper">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
                    <a href="/products/index.html?category=1" class="category-link">
                        <div class="circle pastel-chocolate">
                            <p class="title-category">Chocolates</p>
                            <div><img src="./assets/chocolate_icon.png" alt=""></div>
                        </div>
                    </a>
                </div>
                <div class="swiper-slide">
                    <a href="/products/index.html?category=2" class="category-link">
                        <div class="circle pastel-fruity">
                            <p class="title-category">Dulces Frutales</p>
                            <div><img src="./assets/fruity_icon.png" alt=""></div>
                        </div>
                    </a>
                </div>
                <div class="swiper-slide">
                    <a href="/products/index.html?category=9" class="category-link">
                        <div class="circle pastel-sour">
                            <p class="title-category">Dulces Ácidos</p>
                            <div><img src="./assets/sour_icon.png" alt=""></div>
                        </div>
                    </a>
                </div>
                <div class="swiper-slide">
                    <a href="/products/index.html?category=3" class="category-link">
                        <div class="circle pastel-spicy">
                            <p class="title-category">Dulces Picantes</p>
                            <div><img src="./assets/spicy_icon.png" alt=""></div>
                        </div>
                    </a>
                </div>
                <div class="swiper-slide">
                    <a href="/products/index.html?category=4" class="category-link">
                        <div class="circle pastel-caramel">
                            <p class="title-category">Dulces de Caramelo</p>
                            <div><img src="./assets/caramel_icon.png" alt=""></div>
                        </div>
                    </a>
                </div>
                <div class="swiper-slide">
                    <a href="/products/index.html?category=5" class="category-link">
                        <div class="circle pastel-minty">
                            <p class="title-category">Dulces Refrescantes</p>
                            <div><img src="./assets/minty_icon.png" alt=""></div>
                        </div>
                    </a>
                </div>
                <div class="swiper-slide">
                    <a href="/products/index.html?category=6" class="category-link">
                        <div class="circle pastel-salty">
                            <p class="title-category">Dulces Salados</p>
                            <div><img src="./assets/salty_icon.png" alt=""></div>
                        </div>
                    </a>
                </div>
                <div class="swiper-slide">
                    <a href="/products/index.html?category=7" class="category-link">
                        <div class="circle pastel-creamy">
                            <p class="title-category">Dulces Cremosos</p>
                            <div><img src="./assets/creamy_icon.png" alt=""></div>
                        </div>
                    </a>
                </div>
                <div class="swiper-slide">
                    <a href="/products/index.html?category=8" class="category-link">
                        <div class="circle pastel-spiced">
                            <p class="title-category">Dulces Especiados</p>
                            <div><img src="./assets/spiced_icon.png" alt=""></div>
                        </div>
                    </a>
                </div>
            </div>
            <!-- Botones de navegación -->
            <div class="swiper-button-next"></div>
            <div class="swiper-button-prev"></div>
            <!-- Paginación -->
            <div class="swiper-pagination"></div>
        </div>
    </div>
    </section>




    <!-- Noticias -->
    <h2 class="text-center my-4">Noticias</h2>
    <div class="container container-news">
        <div class="row text-center">

            <div class="col-md-4 mb-4">
                <div class="card h-100">
                    <div class="card-body text-white d-flex align-items-center justify-content-center"
                        style="height: 150px; background-image: url('./assets/gomitas_piña_colada.jpg'); background-size: cover; background-position: center; border-top-left-radius: .25rem; border-top-right-radius: .25rem;">
                        <strong class="bg-glass">¡Nuevo sabor disponible!</strong>
                    </div>
                    <p class="mt-2 px-3">Lanzamos nuestras gomitas sabor <em>piña colada</em>. Perfectas para el verano,
                        ya
                        disponibles en tienda.</p>
                </div>
            </div>

            <div class="col-md-4 mb-4">
                <div class="card h-100">
                    <div class="card-body text-white d-flex align-items-center justify-content-center"
                        style="height: 150px; background-image: url('./assets/caramelos_suaves.png'); background-size: cover; background-position: center; border-top-left-radius: .25rem; border-top-right-radius: .25rem;">
                        <strong class="bg-glass">Promoción de Agosto</strong>
                    </div>
                    <p class="mt-2 px-3">Aprovecha nuestro <strong>2x1 en caramelos suaves</strong> hasta el 15 de
                        julio. ¡No te
                        lo pierdas!</p>
                </div>
            </div>

            <div class="col-md-4 mb-4">
                <div class="card h-100">
                    <div class="card-body text-white d-flex align-items-center justify-content-center"
                        style="height: 150px; background-image: url('./assets/envio-gratis.jpg'); background-size: cover; background-position: center; border-top-left-radius: .25rem; border-top-right-radius: .25rem;">
                        <strong class="bg-glass">¡Envío gratis!</strong>
                    </div>
                    <p class="mt-2 px-3">Durante todo el mes, disfruta de <strong>envío gratuito</strong> en compras
                        mayores a
                        $500.</p>
                </div>
            </div>

        </div>
    </div>

    <!-- Footer -->
    <footer></footer>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script type="module" src="main.js"></script>
    <script type="module" src="./index/index.js"></script>

    <script type="module" src="./functions/addCart.js"></script>
    <script type="module" src="./functions/viewDetails.js"></script>
    <script type="module" src="./footer/script.js"></script>
    <script type="module" src="./functions/addCart.js"></script>

    <!-- SweetAlert -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Esperamos a que todo el contenido de la página esté listo
        document.addEventListener('DOMContentLoaded', function () {

            // Identificamos los elementos con los que vamos a trabajar
            const videoContainer = document.querySelector('.video-container-fallback');
            const iframe = document.getElementById('vimeo-player');
            const player = new Vimeo.Player(iframe);

            // Esta es la función que se ejecutará si el video falla
            const showFallback = () => {
                // Simplemente añade la clase "show-fallback" al contenedor. El CSS se encarga del resto.
                videoContainer.classList.add('show-fallback');
            };

            // Creamos un temporizador. Si en 8 segundos el video no ha cargado, llamamos a la función de fallback.
            const fallbackTimer = setTimeout(showFallback, 8000); // 8000 milisegundos = 8 segundos

            // Le pedimos a la API de Vimeo que nos avise cuando el video esté cargado y listo
            player.on('loaded', function () {
                // Si el video carga, cancelamos el temporizador para que el fallback nunca se active.
                clearTimeout(fallbackTimer);
            });

            // Como medida extra, si Vimeo reporta un error directamente...
            player.on('error', function () {
                // ...activamos el fallback inmediatamente, sin esperar al temporizador.
                clearTimeout(fallbackTimer);
                showFallback();
            });
        });
    </script>
</body>

</html>